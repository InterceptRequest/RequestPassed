<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjpowernode.crm.mapper.ActivitiesMapper">
    <select id="get" resultType="Activities">
        select  * from tbl_marketing_activities
        <where>
            <if test="name != null and name !='' ">
                and name like  '%' #{name} '%'
            </if>
            <if test="owner != null and owner !='' ">
                and owner like '%' #{owner} '%'
            </if>
            <if test="startDate != null and startDate !='' ">
                and startDate = #{startDate}
            </if>
            <if test="endDate != null and endDate !='' " >
                and endDate = #{endDate}
            </if>
        </where>

    </select>


    <select id="getActivities" resultType="map">
        SELECT
            a.*
        FROM
            tbl_marketing_activities a
            LEFT JOIN tbl_clue_activity_relation b ON a.id = b.activityId
        WHERE
            b.clueId = #{clued}
    </select>

    <insert id="insertList">
        insert into tbl_marketing_activities values
        <foreach collection="list" item="list" separator=",">
            (
            #{list.id},
            #{list.owner},
            #{list.name},
            #{list.startDate},
            #{list.endDate},
            #{list.cost},
            #{list.description},
            #{list.createBy},
            #{list.createTime},
            #{list.editBy},
            #{list.editTime}
            )
        </foreach>
    </insert>


</mapper>